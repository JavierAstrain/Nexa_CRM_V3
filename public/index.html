<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NEXA CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root { --nexa-primary:#1d4ed8; --nexa-accent:#0ea5e9; --nexa-bg:#0b1220; --nexa-card:#0f172a; --nexa-text:#e5e7eb; --nexa-muted:#94a3b8; }
      body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: linear-gradient(180deg,#0b1220 0%,#111827 100%); color: var(--nexa-text); }
      .card { background: rgba(15,23,42,.9); border: 1px solid rgba(148,163,184,.15); border-radius: 12px; }
      .btn { background: linear-gradient(90deg, var(--nexa-primary), var(--nexa-accent)); color: white; }
      .input { background:#0b1220; border:1px solid rgba(148,163,184,.2); color: var(--nexa-text); border-radius:8px; }
      .kanban-col { min-width:260px; }
      .tag { background: rgba(14,165,233,.1); color:#7dd3fc; border:1px solid rgba(125,211,252,.3); }
      .chip { background: rgba(30,64,175,.2); border:1px solid rgba(59,130,246,.3); color:#c7d2fe; }
    </style>
  </head>
  <body class="min-h-screen">
    <header class="border-b border-slate-800/60 sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-lg bg-gradient-to-br from-blue-600 to-cyan-500 grid place-items-center font-bold">N</div>
          <div>
            <h1 class="text-xl font-semibold tracking-tight">NEXA <span class="text-slate-400 font-normal">CRM</span></h1>
            <p class="text-xs text-slate-400 -mt-1">Gestión de clientes con IA</p>
          </div>
        </div>
        <nav class="flex gap-2">
          <button data-tab="dashboard" class="px-3 py-2 text-sm rounded-md bg-slate-800/60 border border-slate-700 text-slate-200">Dashboard</button>
          <button data-tab="contacts" class="px-3 py-2 text-sm rounded-md hover:bg-slate-800/60 border border-slate-700 text-slate-300">Contactos</button>
          <button data-tab="opportunities" class="px-3 py-2 text-sm rounded-md hover:bg-slate-800/60 border border-slate-700 text-slate-300">Oportunidades</button>
          <button data-tab="tasks" class="px-3 py-2 text-sm rounded-md hover:bg-slate-800/60 border border-slate-700 text-slate-300">Tareas</button>
        </nav>
      </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-6 space-y-6">
      <section id="tab-dashboard" class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="card p-4"><div class="text-slate-400 text-sm">Nuevos contactos (30 días)</div><div id="metric-new-contacts" class="text-3xl font-semibold mt-2">0</div></div>
        <div class="card p-4"><div class="text-slate-400 text-sm">Valor total del pipeline</div><div id="metric-pipeline-value" class="text-3xl font-semibold mt-2">$0</div></div>
        <div class="card p-4"><div class="text-slate-400 text-sm">Oportunidades por etapa</div><div id="metric-by-stage" class="text-sm mt-2 text-slate-300"></div></div>
      </section>

      <section id="tab-contacts" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Contactos</h2>
          <form id="contact-form" class="grid md:grid-cols-6 gap-3 mt-4">
            <input class="input px-3 py-2 md:col-span-2" name="name" placeholder="Nombre" />
            <input class="input px-3 py-2" name="email" placeholder="Email" />
            <input class="input px-3 py-2" name="phone" placeholder="Teléfono" />
            <input class="input px-3 py-2" name="company" placeholder="Empresa" />
            <select class="input px-3 py-2" name="status"><option>Prospect</option><option>Cliente</option><option>Inactivo</option></select>
            <button class="btn px-3 py-2 rounded-md" type="submit">Crear</button>
            <textarea class="input px-3 py-2 md:col-span-6" name="notes" placeholder="Notas / Historial de interacciones"></textarea>
          </form>
        </div>
        <div class="grid md:grid-cols-2 gap-4" id="contacts-list"></div>
      </section>

      <section id="tab-opportunities" class="hidden">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-semibold">Pipeline de ventas</h2>
          <button id="btn-new-opp" class="btn px-3 py-2 rounded-md text-sm">Nueva oportunidad</button>
        </div>
        <div class="mt-4 overflow-x-auto">
          <div id="kanban" class="flex gap-4"></div>
        </div>
      </section>

      <section id="tab-tasks" class="hidden">
        <div class="card p-4">
          <h2 class="text-lg font-semibold">Tareas</h2>
          <form id="task-form" class="grid md:grid-cols-6 gap-3 mt-4">
            <input class="input px-3 py-2 md:col-span-2" name="title" placeholder="Título" />
            <input class="input px-3 py-2" name="dueDate" type="date" />
            <select class="input px-3 py-2" name="status"><option value="pending">Pendiente</option><option value="done">Hecha</option></select>
            <select class="input px-3 py-2" name="linkedType"><option value="">Sin vínculo</option><option value="contact">Contacto</option><option value="opportunity">Oportunidad</option></select>
            <input class="input px-3 py-2" name="linkedId" placeholder="ID vínculo (opcional)" />
            <button class="btn px-3 py-2 rounded-md" type="submit">Crear</button>
            <textarea class="input px-3 py-2 md:col-span-6" name="notes" placeholder="Notas"></textarea>
          </form>
        </div>
        <div id="tasks-list" class="grid md:grid-cols-2 gap-4 mt-4"></div>
      </section>
    </main>

    <template id="contact-card">
      <div class="card p-4 flex flex-col gap-2">
        <div class="flex items-center justify-between"><div class="font-semibold name"></div><div class="text-xs chip px-2 py-1 rounded status"></div></div>
        <div class="text-sm text-slate-300"><div class="email"></div><div class="phone"></div><div class="company"></div></div>
        <div class="text-xs text-slate-400">Notas</div>
        <textarea class="input px-3 py-2 text-sm notes"></textarea>
        <div class="flex gap-2 mt-2">
          <button class="btn px-3 py-2 rounded-md text-sm summarize">Generar resumen</button>
          <button class="px-3 py-2 rounded-md text-sm bg-red-600/80 hover:bg-red-600 text-white delete">Eliminar</button>
          <button class="px-3 py-2 rounded-md text-sm bg-slate-700 hover:bg-slate-600 text-white save">Guardar</button>
        </div>
        <div class="summary text-slate-300 text-sm mt-1"></div>
      </div>
    </template>

    <template id="kanban-column">
      <div class="kanban-col card p-3"><div class="font-semibold mb-2 title"></div><div class="space-y-3 items"></div></div>
    </template>

    <template id="opportunity-card">
      <div class="card p-3 space-y-2">
        <div class="flex items-center justify-between"><div class="font-semibold title"></div><button class="text-xs bg-red-600/80 hover:bg-red-600 text-white rounded px-2 py-1 delete">Eliminar</button></div>
        <div class="text-sm text-slate-300">
          <div class="value"></div>
          <div class="flex items-center gap-2 mt-1">
            <label class="text-xs text-slate-400">Etapa</label>
            <select class="input px-2 py-1 text-sm stage">
              <option>Prospecto</option><option>Calificado</option><option>Propuesta</option><option>Negociacion</option><option>Cerrado/Ganado</option><option>Cerrado/Perdido</option>
            </select>
          </div>
          <textarea class="input px-2 py-1 text-sm description"></textarea>
        </div>
        <div class="flex gap-2">
          <button class="btn px-3 py-1.5 rounded text-xs predict">Predecir %</button>
          <input class="input px-2 py-1 text-sm w-20 probability" type="number" min="0" max="100" />
        </div>
        <div class="text-xs text-slate-400">ID: <span class="id"></span></div>
      </div>
    </template>

    <template id="task-card">
      <div class="card p-3 space-y-2">
        <div class="flex items-center justify-between"><div class="font-semibold title"></div><button class="text-xs bg-red-600/80 hover:bg-red-600 text-white rounded px-2 py-1 delete">Eliminar</button></div>
        <div class="text-sm text-slate-300">
          <div class="due"></div><div class="link"></div>
          <textarea class="input px-2 py-1 text-sm notes"></textarea>
        </div>
        <div class="flex gap-2">
          <select class="input px-2 py-1 text-sm status"><option value="pending">Pendiente</option><option value="done">Hecha</option></select>
          <button class="px-3 py-1.5 rounded text-xs bg-slate-700 hover:bg-slate-600 text-white save">Guardar</button>
        </div>
        <div class="text-xs text-slate-400">ID: <span class="id"></span></div>
      </div>
    </template>

    <script src="/script.js"></script>
  </body>
</html>
